{"version":3,"sources":["webpack:///src/app/pages/Inventarios/ivtempleados/ivtempleados-routing.module.ts","webpack:///src/app/pages/Inventarios/ivtempleados/ivtempleados.module.ts","webpack:///src/app/pages/Inventarios/ivtempleados/ivtempleados.page.html","webpack:///src/app/pages/Inventarios/ivtempleados/ivtempleados.page.ts"],"names":["routes","path","component","IVTempleadosPageRoutingModule","forChild","imports","exports","IVTempleadosPageModule","declarations","IVTempleadosPage","almacenamiento","IVTapi","toast","active","loading","empleados","buscados","accesos","load","marcar","id","ivt","cargauno","snapshot","paramMap","get","traerEmpleados","event","then","target","complete","catch","obtenerToken","info","leerEmpleados","token","subscribe","data","console","log","exe","arr","response","forEach","item","usuario","imagen","length","leerInventario","re","find","acceso","_id","checked","toastError","err","detail","create","message","translucent","mode","present","editarAcceso","value","estado","dismiss","refrescando","selector","templateUrl","styleUrls"],"mappings":"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","file":"Inventarios-ivtempleados-ivtempleados-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IVTempleadosPage } from './ivtempleados.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: IVTempleadosPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class IVTempleadosPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { IVTempleadosPageRoutingModule } from './ivtempleados-routing.module';\n\nimport { IVTempleadosPage } from './ivtempleados.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    IVTempleadosPageRoutingModule\n  ],\n  declarations: [IVTempleadosPage]\n})\nexport class IVTempleadosPageModule {}\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar color=\"success\">\n\n        <ion-buttons slot=\"start\">\n            <ion-back-button icon=\"chevron-back-outline\" defaultHref=\"/central/menu/ivt-inicio\"></ion-back-button>\n        </ion-buttons>\n\n        <ion-title>Mis Empleados</ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content>\n\n    <ion-refresher slot=\"fixed\" (ionRefresh)=\"refrescando($event)\" pullFactor=\"0.5\" pullMin=\"50\" pullMax=\"150\">\n        <ion-refresher-content pullingIcon=\"arrow-dropdown\" refreshingSpinner=\"circles\">\n        </ion-refresher-content>\n    </ion-refresher>\n\n    <ion-searchbar mode=\"ios\" placeholder=\"Buscar Empleado\"></ion-searchbar>\n\n\n\n    <div class=\"divider light\"></div>\n\n    <div class=\"divider\"></div>\n\n    <div class=\"cen\" *ngIf=\"empleados.length === 0\">\n        <img src=\"/assets/Empleadoslista.png\" width=\"100px\" alt=\"\">\n        <h3 class=\"tituloGrande\">No tiene empleados registrados</h3>\n    </div>\n\n    <div class=\"carga\" *ngIf=\"load\">\n        <ion-list>\n            <ion-item *ngFor=\"let e of [1,1,1,1,1]\">\n                <ion-skeleton-text slot=\"start\" animated style=\"width: 50px; height: 50px\"></ion-skeleton-text>\n                <ion-label>\n                    <ion-skeleton-text animated style=\"width: 50%; height: 20px\"></ion-skeleton-text>\n                    <ion-skeleton-text animated style=\"width: 90%; height: 20px\"></ion-skeleton-text>\n                </ion-label>\n            </ion-item>\n        </ion-list>\n\n    </div>\n\n\n    <ion-list *ngIf=\"empleados.length > 0\">\n        <ion-item-divider lines=\"none\" color=\"muro\">\n            <div class=\"padreflex\">\n                <div class=\"titulo\">\n                    <h3>Registrados</h3>\n                </div>\n                <div class=\"numero\">\n                    <img src=\"/assets/Empleadoslista.png\" width=\"25px\" height=\"25px\" alt=\"\">\n                    <h3>{{ empleados.length }}</h3>\n                </div>\n            </div>\n        </ion-item-divider>\n        <ion-item-sliding *ngFor=\"let empleado of empleados\">\n            <ion-item>\n                <ion-avatar slot=\"start\">\n                    <img [src]=\"empleado.usuario.imagen\" width=\"100%\" height=\"100%\" alt=\"\">\n                </ion-avatar>\n                <ion-label>\n                    <span>{{ empleado.usuario.nombrecompleto }}</span><br> <strong class=\"verdei\">@{{ empleado.usuario.nombreusuario }}</strong>\n                    <div *ngIf=\"empleado.cargo\" class=\"rojoi\">Cargo: {{ empleado.cargo }}</div>\n                    <div *ngIf=\"empleado.alias\" class=\"rojoi\">Alías: {{ empleado.alias }}</div>\n                </ion-label>\n\n                <ion-checkbox [checked]=\"empleado.checked\" slot=\"end\" color=\"danger\" value=\"{{ empleado.usuario._id }}\" (ionChange)=\"marcando( $event )\"></ion-checkbox>\n\n            </ion-item>\n\n\n        </ion-item-sliding>\n    </ion-list>\n\n\n</ion-content>","import { Component, OnInit } from '@angular/core';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { InventariosService } from '../../../providers/Api/Inventarios.service';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { LoadingController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-ivtempleados',\n  templateUrl: './ivtempleados.page.html',\n  styleUrls: ['./ivtempleados.page.scss'],\n})\nexport class IVTempleadosPage implements OnInit {\n  \n  empleados = [];\n  buscados = [];\n  accesos = [];\n\n  load = false;\n\n  marcar = false;\n  id = '';\n\n  ivt: any = {};\n  cargauno = false;\n\n  constructor(\n    private almacenamiento: InicioService,\n    private IVTapi: InventariosService,\n    private toast: ToastServices,\n    private active: ActivatedRoute,\n    private loading: LoadingController\n  ) { }\n\n  ngOnInit() {\n  }\n\n  async ionViewWillEnter() {\n    this.id = this.active.snapshot.paramMap.get('id');\n    await this.traerEmpleados()\n  }\n\n  refrescando( event) {\n    this.traerEmpleados().then(() => {\n      event.target.complete();\n    }).catch(() => {\n      event.target.complete();\n    });\n  }\n\n\n\n  async traerEmpleados() {\n    this.load = true;\n    const info = await this.almacenamiento.obtenerToken();\n\n    if ( info ) {\n        \n        this.IVTapi.leerEmpleados(info.token).subscribe((data: any) => {\n            console.log(data);\n            if (data.exe) {\n\n                let arr = [];\n\n                data.response.forEach((item) => {\n                  if (item.usuario.imagen.length > 0) {\n                    item.usuario.imagen = `https://motocaliapp.com/${item.usuario.imagen[0].path}`;\n                  } else {\n                    item.usuario.imagen = '/assets/notfound.png';\n                  }\n                })\n                arr = data.response;\n\n                console.log(this.id);\n\n                this.IVTapi.leerInventario(info.token, this.id).subscribe((re: any) => {\n                    console.log(re, 'mio');\n                    if (re.exe) {\n                      this.ivt = re.response;\n                      arr.forEach((item) => {\n                        if (re.response.accesos.find((acceso) => acceso === item.usuario._id )) {\n                            item.checked = true;\n                          }\n\n                          console.log('bien')\n                      })\n                      this.cargauno = true;\n                      console.log(this.cargauno)\n                      this.empleados = arr;\n                    }\n\n                  \n                })\n\n            } else {\n              this.toast.toastError('No se pudo traer la información, intentelo más tarde');\n            }\n\n            this.load = false;\n        }, (err) => {\n          this.toast.toastError('No se pudo traer la información, intentelo más tarde');\n        })\n\n      }\n  }\n\n  async marcando( event ) {\n    console.log(event.detail)\n    if (this.cargauno) {\n      const loading = await this.loading.create({\n        message: 'Procesando información...',\n        translucent: true,\n        mode: 'ios'\n      })\n  \n      await loading.present();\n  \n      const info = await this.almacenamiento.obtenerToken();\n  \n      if ( info ) {\n        // tslint:disable-next-line:max-line-length\n        this.IVTapi.editarAcceso(info.token, {id: event.detail.value, estado: event.detail.checked, _id: this.id}).subscribe(async (re: any) => {\n                \n          if (re.exe) {\n          }\n  \n          await loading.dismiss();\n      }, async (err) => {\n        await loading.dismiss();\n      })\n      }\n    }\n  }\n\n  ionViewDidLeave() {\n    console.log('sale');\n    this.cargauno = false;\n    this.empleados = [];\n  }\n\n}\n"]}