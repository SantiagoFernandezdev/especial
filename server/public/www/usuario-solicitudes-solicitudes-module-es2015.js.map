{"version":3,"sources":["./src/app/pages/usuario/solicitudes/solicitudes-routing.module.ts","./src/app/pages/usuario/solicitudes/solicitudes.module.ts","./src/app/pages/usuario/solicitudes/solicitudes.page.ts","./src/app/pages/usuario/solicitudes/solicitudes.page.html"],"names":[],"mappings":"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","file":"usuario-solicitudes-solicitudes-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SolicitudesPage } from './solicitudes.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SolicitudesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SolicitudesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SolicitudesPageRoutingModule } from './solicitudes-routing.module';\n\nimport { SolicitudesPage } from './solicitudes.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SolicitudesPageRoutingModule\n  ],\n  declarations: [SolicitudesPage]\n})\nexport class SolicitudesPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ApiSeguimientoService } from 'src/app/providers/Api/Seguimiento.service';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { trigger, transition, query, style, stagger, animate } from '@angular/animations';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { CargaElementosUsuariosService } from '../../../providers/cargas/usuarios.service';\n\n@Component({\n  selector: 'app-solicitudes',\n  templateUrl: './solicitudes.page.html',\n  animations: [\n    trigger('solicitudes', [\n      transition('* => *', [\n        query(':enter', [\n          style({\n            opacity: 0,\n            transform: 'translateY(400px)'\n          }),\n          stagger(300, [\n            animate('500ms', style({\n              opacity: 1,\n              transform: 'none'\n            }))\n          ])\n        ], {optional: true}),\n\n        query(':leave', [\n          style({\n            opacity: 1,\n            transform: 'none'\n          }),\n          stagger(300, [\n            animate('500ms', style({\n              opacity: 0,\n              transform: 'translateY(-100%)'\n            }))\n          ])\n        ], {optional: true})\n      ])\n    ])\n  ],\n  styleUrls: ['./solicitudes.page.scss'],\n})\nexport class SolicitudesPage implements OnInit {\n\n  seguimientos: any = [];\n  red = 'wifi';\n\n  cancelSuscribe: any;\n\n  constructor(\n    private apiSeguimiento: ApiSeguimientoService,\n    private almacenamiento: InicioService,\n    private toastUtilidad: ToastServices,\n    private cargarElementos: CargaElementosUsuariosService\n  ) { \n    this.cargarElementos.$cargarRed.subscribe((red: any) => {\n      this.red = red;\n      if (this.red !== 'none') {\n        this.arrancar();\n      }\n    })\n\n  }\n\n  ngOnInit() {\n  }\n\n  ionViewDidEnter() {\n    if (this.red !== 'none') {\n      this.arrancar();\n    }\n  }\n\n  arrancar() {\n    \n    this.almacenamiento.obtenerToken().then((info: any) => {\n        this.cancelSuscribe = this.apiSeguimiento.solicitudesRecibidas(info.token).subscribe((solicitudes: any) => {\n             this.seguimientos = [];\n             console.log(solicitudes.response, 11);\n  \n             const data = solicitudes.response.SeguimientoData;\n  \n             if (data.length > 0) {\n              data.forEach((item) => {\n                if ( item.usuarioEmisor.imagen.length > 0) {\n                  item.imagen = item.usuarioEmisor.imagen[0].path;\n                } else {\n                  item.imagen = '';\n                }\n                \n                this.seguimientos.push(item);\n              })\n             }\n  \n             console.log(this.seguimientos, ' Seguimientos');\n        }, (err) => {\n          this.toastUtilidad.alertApplication('No se pudo aceptar la solicitud', false);\n        })\n    });\n  }\n\n  aceptar(solicitud: any, idx: number) {\n    console.log('Datos del aceptar ', solicitud, idx)\n    this.almacenamiento.obtenerToken().then((info: any) => {\n      this.apiSeguimiento.aceptarSolicitud(info.token, solicitud.usuarioEmisor._id).subscribe((seguimiento: any) => {\n          console.log(seguimiento, ' Solicitud aceptada');\n          this.toastUtilidad.alertApplication('Solicitud aceptada', true);\n          this.seguimientos.splice(idx, 1);\n      }, (err) => {\n        this.toastUtilidad.alertApplication('No se pudo aceptar la solicitud', false);\n      })\n    })\n  }\n\n  eliminar(seguimiento: any, idx: number) {\n    this.almacenamiento.obtenerToken().then((info: any) => {\n      this.apiSeguimiento.cancelarSolicitud(info.token, seguimiento.usuarioEmisor._id, '0').subscribe(() => {\n        this.seguimientos.splice(idx, 1);\n      }, (err) => {\n        this.toastUtilidad.alertApplication('No se pudo aceptar la solicitud', false);\n      })\n    })\n  }\n\n  ionViewDidLeave() {\n    // tslint:disable-next-line:no-unused-expression\n    this.cancelSuscribe.unsubscribe;\n  }\n\n}\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar color=\"oscuro\">\n        <ion-back-button slot=\"start\" defaultHref=\"/central/menu/\" icon=\"chevron-back-outline\">\n        </ion-back-button>\n        <ion-title class=\"medium\">solicitudes de Seguimiento {{seguimientos.length}}</ion-title>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n\n\n    <div class=\"divider\"></div>\n\n\n    <div class=\"blanco\" [ngClass]=\"{'hauto centrar': seguimientos.length === 0}\">\n\n        <ion-list class=\"blanco \" [@solicitudes]=\"seguimientos.length\" *ngIf=\"seguimientos.length > 0\">\n            <ion-item lines=\"none\" color=\"blanco\" *ngFor=\"let solicitud of seguimientos; let i = index;\">\n                <ion-avatar class=\"avatar\" slot=\"start\">\n                    <ion-img src=\"https://motocaliapp.com/{{solicitud.imagen}}\"></ion-img>\n                </ion-avatar>\n                <ion-label class=\"ion-text-wrap\">\n                    <strong class=\"small\">{{solicitud.usuarioEmisor.nombrecompleto}}</strong><br>\n                    <div>@{{solicitud.usuarioEmisor.nombreusuario}}</div>\n                    <div class=\"moto-padre\">\n                        <ion-button (click)=\"aceptar(solicitud, i)\" color=\"success\" shape=\"round\" mode=\"ios\">Aceptar</ion-button>\n\n                        <ion-button (click)=\"eliminar(solicitud, i)\" color=\"light\" shape=\"round\" mode=\"ios\">Eliminar</ion-button>\n                    </div>\n                </ion-label>\n\n            </ion-item>\n        </ion-list>\n    </div>\n</ion-content>"],"sourceRoot":"webpack:///"}