{"version":3,"sources":["webpack:///src/app/pages/Facturas/factura-nueva/factura-nueva-routing.module.ts","webpack:///src/app/pages/Facturas/factura-nueva/factura-nueva.module.ts","webpack:///src/app/pages/Facturas/factura-nueva/factura-nueva.page.html","webpack:///src/app/pages/Facturas/factura-nueva/factura-nueva.page.ts","webpack:///src/app/pages/Facturas/modal-factura/modal-factura-routing.module.ts","webpack:///src/app/pages/Facturas/modal-factura/modal-factura.module.ts","webpack:///src/app/pages/Facturas/modal-factura/modal-factura.page.html","webpack:///src/app/pages/Facturas/modal-factura/modal-factura.page.ts"],"names":["routes","path","component","FacturaNuevaPageRoutingModule","forChild","imports","exports","FacturaNuevaPageModule","entryComponents","declarations","FacturaNuevaPage","almacenamiento","toast","apiFactura","modalCtrl","loading","alert","facturas","car","load","nuevo","mostrar","nit","direccion","regimen","titular","iva","valorIva","id","mensaje","desde","patron","setTimeout","consultar","event","cargarFacturas","then","target","complete","catch","infinite","disabled","obtenerToken","info","consultarFacturas","token","subscribe","data","exe","response","toastError","err","detail","value","length","forEach","hoja","push","consultarConfiguracion","_id","create","componentProps","modal","present","onWillDismiss","cerrado","header","message","inputs","type","name","buttons","text","role","handler","pdf","correo","cargaProcesos","enviarrFacturas","toastExitoso","finalizarCargado","refrescando","buscar","selector","templateUrl","styleUrls","static","ModalFacturaPageRoutingModule","ModalFacturaPageModule","ModalFacturaPage","alertCtrl","items","totales","subtotal","total","cliente","telefono","cc","ciudad","carga","dismiss","placeholder","cantidad","valoru","calculo","idx","splice","sb","item","parseFloat","guardarConfiguracion","lista","descuento","idconfig","cerrar"],"mappings":"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","file":"Facturas-factura-nueva-factura-nueva-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FacturaNuevaPage } from './factura-nueva.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FacturaNuevaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FacturaNuevaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FacturaNuevaPageRoutingModule } from './factura-nueva-routing.module';\n\nimport { FacturaNuevaPage } from './factura-nueva.page';\nimport { ModalFacturaPage } from '../modal-factura/modal-factura.page';\nimport { ModalFacturaPageModule } from '../modal-factura/modal-factura.module';\nimport { PipesModule } from '../../../pipes/pipes.module';\n\n@NgModule({\n  entryComponents: [\n    ModalFacturaPage\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    FacturaNuevaPageRoutingModule,\n    ModalFacturaPageModule,\n    PipesModule\n  ],\n  declarations: [FacturaNuevaPage]\n})\nexport class FacturaNuevaPageModule {}\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar color=\"oscuro\">\n        <ion-back-button slot=\"start\" icon=\"chevron-back-outline\" defaultHref=\"/central/menu/factura\"></ion-back-button>\n        <ion-title>Crear Factura</ion-title>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n\n    <ion-list *ngIf=\"mensaje\">\n        <ion-item-divider color=\"barra\">\n            <ion-label class=\"ion-text-wrap\">La factura se estructura de acuerdo a los parámetros de configuración establecidos</ion-label>\n        </ion-item-divider>\n    </ion-list>\n\n    <ion-refresher slot=\"fixed\" (ionRefresh)=\"refrescando($event)\" pullFactor=\"0.5\" pullMin=\"50\" pullMax=\"150\">\n        <ion-refresher-content pullingIcon=\"arrow-dropdown\" refreshingSpinner=\"circles\">\n        </ion-refresher-content>\n    </ion-refresher>\n\n    <ion-searchbar debounce=\"300\" mode=\"ios\" placeholder=\"Buscar Productos\" (ionChange)=\"buscar($event)\"></ion-searchbar>\n\n\n    <div class=\"divider\"></div>\n\n    <div class=\"cen\" *ngIf=\"facturas.length === 0 && load\">\n        <img src=\"/assets/NuevaFactura.png\" width=\"100px\" alt=\"\">\n        <h3 class=\"tituloGrande\">No tiene facturas creadas hasta el momento</h3>\n        <ion-button mode=\"ios\" shape=\"round\" color=\"success\" (click)=\"abrir()\">Crear Factura</ion-button>\n    </div>\n\n    <ion-list>\n        <ion-item-sliding *ngFor=\"let factura of facturas\">\n            <ion-item>\n\n                <ion-label class=\"ion-text-wrap\">\n                    <div class=\"fl\">\n                        <div class=\"caja\">FACTURA NÚMERO {{ factura.consecutivo }}</div>\n                    </div>\n                    <div class=\"flex\"><strong>Total: </strong> <span>${{ factura.total | decimales: 'es-CO'}}</span></div>\n                    <div class=\"flex\"><strong>Cliente: </strong> <span>{{ factura.cliente }}</span></div>\n                    <div class=\"flex\"><strong>Nit o CC: </strong> <span>{{ factura.cc }}</span></div>\n                </ion-label>\n            </ion-item>\n            <ion-item-options side=\"end\">\n                <ion-item-option color=\"medium\" (click)=\"alerta(factura._id)\">\n                    <ion-icon name=\"document-text-outline\" slot=\"icon-only\"></ion-icon>\n                </ion-item-option>\n            </ion-item-options>\n        </ion-item-sliding>\n    </ion-list>\n\n\n    <ion-infinite-scroll *ngIf=\"load\" #inifinito threshold=\"100px\" (ionInfinite)=\"loadData($event)\">\n        <ion-infinite-scroll-content loadingSpinner=\"bubbles\" loadingText=\"Cargando Hojas de Vida...\">\n        </ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n\n    <ion-fab *ngIf=\"facturas.length > 0\" vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n        <ion-fab-button color=\"barra\" (click)=\"abrir()\">\n            <ion-icon name=\"add-outline\"></ion-icon>\n        </ion-fab-button>\n    </ion-fab>\n\n</ion-content>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { FacturasService } from '../../../providers/Api/Facturas.service';\nimport { AlertController, IonInfiniteScroll, ModalController } from '@ionic/angular';\nimport { LoadingService } from '../../../providers/Utilidades/LoadingService.service';\nimport { ModalFacturaPage } from '../modal-factura/modal-factura.page';\n\n@Component({\n  selector: 'app-factura-nueva',\n  templateUrl: './factura-nueva.page.html',\n  styleUrls: ['./factura-nueva.page.scss'],\n})\nexport class FacturaNuevaPage implements OnInit {\n\n  facturas = [];\n  car = true;\n  load = false;\n  nuevo = false;\n  mostrar = false;\n  nit = '';\n  direccion = '';\n  regimen = '';\n  titular = '';\n  telefono: '';\n  iva = false;\n  valorIva = 0;\n\n  id = '';\n\n  mensaje = true;\n\n  desde = 0;\n  patron = '';\n\n\n  @ViewChild('inifinito', {static: false}) infinite: IonInfiniteScroll;\n  constructor(\n    private almacenamiento: InicioService,\n    private toast: ToastServices,\n    private apiFactura: FacturasService,\n    private modalCtrl: ModalController,\n    private loading: LoadingService,\n    private alert: AlertController\n  ) { }\n\n  ngOnInit() {\n    setTimeout(() => {\n      this.mensaje = false;\n    }, 7000 )\n  }\n\n  ionViewWillEnter() {\n    this.mostrar = false;\n    this.consultar();\n  }\n\n\n  refrescando( event ) {\n    this.cargarFacturas().then(() => {\n      event.target.complete();\n    }).catch(() => event.target.complete());\n  }\n\n  async cargarFacturas() {\n    this.desde = 0;\n    if (this.load) {\n      \n      this.infinite.disabled = false;\n    }\n    const info = await this.almacenamiento.obtenerToken();\n\n    if ( info ) {\n      this.apiFactura.consultarFacturas(info.token, {desde: this.desde }).subscribe((data: any) => {\n        if (data.exe) {\n            this.facturas = data.response;\n        } else {\n          this.toast.toastError('No se pudo cargar las facturas, intentelo más tarde');\n        }\n        this.load = true;\n      }, (err) => {\n          this.toast.toastError('No se pudo cargar las facturas, intentelo más tarde');\n      })\n    }\n}\nasync buscar(event) {\n    // console.log(event.detail, 'epale');\n    \n    if ( event.detail.value !== '') {\n      this.desde = 0;\n      this.infinite.disabled = false;\n      this.patron = event.detail.value;\n\n      const info = await this.almacenamiento.obtenerToken();\n\n      if ( info ) {\n        this.apiFactura.consultarFacturas(info.token, {desde: this.desde,  patron: this.patron }).subscribe((data: any) => {\n          // console.log(data, 'mi data');\n          if ( data.exe ){\n            this.facturas = data.response;\n            if ( data.response.length === 0) {\n              this.desde = 0;\n            }\n          } else {\n            this.toast.toastError('No se pudo realizar la búsqueda, intentelo más tarde');\n          }\n        }, (err) => {\n          this.toast.toastError('No se pudo realizar la búsqueda, intentelo más tarde');\n        })\n      }\n    } else {\n      this.desde = 0;\n    \n    }\n  }\n\n  \n  async loadData( event ) {\n    // event.target.complete()\n    this.desde = this.desde + 15;\n\n    const info = await this.almacenamiento.obtenerToken();\n\n    if ( info ) {\n      if ( this.patron === '') {\n        this.apiFactura.consultarFacturas(info.token, {desde: this.desde,  patron: this.patron }).subscribe((data: any) => {\n          // console.log(data, 'CARGADA OFICIAL');\n          if (data.exe) {\n            if ( data.response.length > 0  ) {\n              data.response.forEach((hoja) => {\n                this.facturas.push(hoja);\n              })\n              event.target.complete();\n             } else {\n              event.target.disabled = true;\n              this.desde = 0;\n             }\n          } else {\n            this.toast.toastError('No se pudo traer las hojas de vida, inténtelo más tarde.');\n          }\n        }, (err) => {\n          this.toast.toastError('No se pudo traer las hojas de vida, inténtelo más tarde.');\n        })\n      } else {\n        // tslint:disable-next-line:max-line-length\n        // console.log(this.desde, 'pli');\n        this.apiFactura.consultarFacturas(info.token, {desde: this.desde,  patron: this.patron }).subscribe((data: any) => {\n          // console.log(data, 'mi data 2', this.desde);\n          if ( data.exe ){\n            if ( data.response.length > 0  ) {\n              data.response.forEach((hoja) => {\n                this.facturas.push(hoja);\n              })\n              event.target.complete();\n           } else {\n            event.target.disabled = true;\n            this.desde = 0;\n           }\n          } else {\n            this.toast.toastError('No se pudo realizar la búsqueda, intentelo más tarde');\n          }\n        }, (err) => {\n          this.toast.toastError('No se pudo realizar la búsqueda, intentelo más tarde');\n        })\n      }\n      \n      \n    }\n    }\n\n\n\n\n  async consultar() {\n      const info = await this.almacenamiento.obtenerToken();\n\n      if ( info  ) {\n        this.apiFactura.consultarConfiguracion(info.token).subscribe((data: any) => {\n          if (data.exe) {\n            if (!data.response) {\n              this.nuevo = true;\n            } else {\n              // console.log(data)\n              this.regimen = data.response.regimen;\n              this.direccion = data.response.direccion;\n              this.titular = data.response.titular;\n              this.nit = data.response.nit;\n              this.iva = data.response.iva;\n              this.valorIva = data.response.valorIva;\n              this.id = data.response._id;\n\n              this.mostrar = true;\n\n              this.cargarFacturas();\n            }\n          } else {\n            this.toast.toastError('No se pudo consultar la información de la configuración, intentelo mpas tarde');\n          }\n        }, (err) => {\n          this.toast.toastError('No se pudo consultar la información de la configuración, intentelo mpas tarde');\n        })\n      }\n  }\n\n  async abrir() {\n      const modal = await this.modalCtrl.create({\n        component: ModalFacturaPage,\n        componentProps: {\n          data: {\n            iva: this.iva,\n            regimen: this.regimen,\n            direccion: this.direccion,\n            nit: this.nit,\n            valorIva: this.valorIva,\n            id: this.id\n          }\n        }\n      })\n\n      await modal.present();\n\n      const cerrado = await modal.onWillDismiss();\n\n      if (cerrado) {\n        if (cerrado.data) {\n         if (cerrado.data.exe) {\n          this.cargarFacturas();\n         }\n        }\n      }\n  }\n\n  async alerta(id) {\n    const alert = await this.alert.create({\n      header: 'Correo electrónico',\n      message: 'Escriba el correo electrónico donde se enviará el documento pdf de la factura',\n      inputs: [\n        {\n          type: 'text',\n          name: 'correo'\n        }\n      ],\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel'\n        },\n        {\n          text: 'Enviar',\n          handler: (data) => {\n            this.pdf(data.correo, id);\n          }\n        }\n      ]\n    })\n\n    await alert.present();\n  }\n\n  async pdf(correo, id) {\n\n    const info = await this.almacenamiento.obtenerToken();\n    this.loading.cargaProcesos('Creando Factura y enviandola al correo');\n\n    if ( info  ) {\n      this.apiFactura.enviarrFacturas(info.token, {id, correo}).subscribe((data: any) => {\n        // console.log(data, 'respuesta')\n        if (data.exe) {\n          this.toast.toastExitoso('Factura generada y enviada al correo electrónico del cliente');\n        } else {\n          this.toast.toastError('No se pudo enviar la factura, intentelo mpas tarde');\n        }\n        this.loading.finalizarCargado();\n      }, (err) => {\n        this.loading.finalizarCargado();\n        this.toast.toastError('No se pudo enviar la factura, intentelo mpas tarde');\n      })\n    }\n\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ModalFacturaPage } from './modal-factura.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ModalFacturaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ModalFacturaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ModalFacturaPageRoutingModule } from './modal-factura-routing.module';\n\nimport { ModalFacturaPage } from './modal-factura.page';\nimport { PipesModule } from '../../../pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ModalFacturaPageRoutingModule,\n    PipesModule\n  ],\n  declarations: [ModalFacturaPage]\n})\nexport class ModalFacturaPageModule {}\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar color=\"oscuro\">\n        <ion-buttons slot=\"start\">\n            <ion-button (click)=\"cerrar()\">\n                <ion-icon name=\"chevron-back-outline\" slot=\"icon-only\"></ion-icon>\n            </ion-button>\n        </ion-buttons>\n        <ion-title>Crear Factura</ion-title>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n\n    <div class=\"cargador\" *ngIf=\"!data\">\n        <ion-spinner name=\"crescent\" color=\"barra\"></ion-spinner>\n        <strong>Cargando la interfaz...</strong>\n    </div>\n\n    <ion-list *ngIf=\"data\">\n        <ion-item color=\"light\">\n            <ion-label>Añadir un nuevo item</ion-label>\n            <ion-buttons slot=\"end\">\n                <ion-button (click)=\"crear()\">\n                    <ion-icon name=\"add-outline\" slot=\"icon-only\"></ion-icon>\n                </ion-button>\n            </ion-buttons>\n        </ion-item>\n\n        <div class=\"divider\"></div>\n        <ion-item-sliding *ngFor=\"let item of items; let i = index;\">\n            <ion-item>\n                <ion-label class=\"ion-text-wrap\">\n                    <div>{{ item.item }}</div>\n                    <div class=\"fl\"><strong>Cantidad: </strong> <span>{{item.cantidad }}</span></div>\n                    <div class=\"fl\"><strong>Valor unitario: </strong> <span>${{ item.valoru | decimales: 'es-CO' }}</span></div>\n                    <div class=\"fl\"><strong>Total: </strong><span> ${{ (item.total | decimales: 'es-CO') }}</span></div>\n                </ion-label>\n            </ion-item>\n            <ion-item-options side=\"end\">\n                <ion-item-option color=\"danger\" (click)=\"eliminar(i)\">\n                    <ion-icon name=\"trash-outline\" slot=\"icon-only\"></ion-icon>\n                </ion-item-option>\n            </ion-item-options>\n        </ion-item-sliding>\n\n        <div class=\"divider\"></div>\n\n        <div class=\"td\" *ngFor=\"let tl of totales\">\n            <div class=\"valores\" *ngIf=\"items.length > 0 && carga\">\n                <h3><strong class=\"verdei\">Subtotal: </strong> <span>${{ tl.subtotal | decimales: 'es-CO' }}</span></h3>\n            </div>\n            <div class=\"valores\" *ngIf=\"items.length > 0 && data.iva\">\n                <h3><strong class=\"rojoi\">Iva: </strong> <span>${{ tl.iva | decimales: 'es-CO' }}</span></h3>\n            </div>\n            <div class=\"valores\" *ngIf=\"items.length > 0 && carga\">\n                <h3><strong>Total: </strong> <span>${{ tl.total | decimales: 'es-CO' }}</span></h3>\n            </div>\n        </div>\n\n        <div class=\"divider\"></div>\n        <ion-item mode=\"ios\">\n            <ion-icon slot=\"start\" name=\"alert-circle-outline\" color=\"danger\"></ion-icon>\n            <ion-input type=\"text\" placeholder=\"Nombre del cliente\" [(ngModel)]=\"cliente\"></ion-input>\n        </ion-item>\n        <ion-item mode=\"ios\">\n            <ion-icon slot=\"start\" name=\"alert-circle-outline\" color=\"blanco\"></ion-icon>\n            <ion-input type=\"text\" placeholder=\"Teléfono del cliente\" [(ngModel)]=\"telefono\"></ion-input>\n        </ion-item>\n        <ion-item mode=\"ios\">\n            <ion-icon slot=\"start\" name=\"alert-circle-outline\" color=\"blanco\"></ion-icon>\n            <ion-input type=\"text\" placeholder=\"Dirección del cliente\" [(ngModel)]=\"direccion\"></ion-input>\n        </ion-item>\n        <ion-item mode=\"ios\">\n            <ion-icon slot=\"start\" name=\"alert-circle-outline\" color=\"danger\"></ion-icon>\n            <ion-input type=\"text\" placeholder=\"Cédula o Nit del cliente\" [(ngModel)]=\"cc\"></ion-input>\n        </ion-item>\n        <ion-item mode=\"ios\">\n            <ion-icon slot=\"start\" name=\"alert-circle-outline\" color=\"blanco\"></ion-icon>\n            <ion-input type=\"text\" placeholder=\"Ciudad del cliente\" [(ngModel)]=\"ciudad\"></ion-input>\n        </ion-item>\n\n        <div class=\"divider\"></div>\n        <ion-button mode=\"ios\" color=\"primary\" shape=\"round\" expand=\"block\" (click)=\"guardar()\">CREAR FACTURA</ion-button>\n    </ion-list>\n\n</ion-content>","import { Component, Input, OnInit } from '@angular/core';\nimport { AlertController, ModalController } from '@ionic/angular';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { FacturasService } from '../../../providers/Api/Facturas.service';\n\n@Component({\n  selector: 'app-modal-factura',\n  templateUrl: './modal-factura.page.html',\n  styleUrls: ['./modal-factura.page.scss'],\n})\nexport class ModalFacturaPage implements OnInit {\n\n  items = [];\n  totales = [];\n  subtotal = 0;\n  iva = 0;\n  total = 0;\n\n  cliente = '';\n  telefono = '0';\n  direccion = '';\n  cc = '';\n  ciudad = '';\n\n  id = '';\n\n  carga = false;\n\n  @Input() data;\n\n  constructor(\n    private modalCtrl: ModalController,\n    private almacenamiento: InicioService,\n    private toast: ToastServices,\n    private alertCtrl: AlertController,\n    private apiFactura: FacturasService\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n    // console.log(this.data)\n  }\n\n  cerrar() {\n    this.modalCtrl.dismiss();\n  }\n\n  async crear() {\n    const info = await this.alertCtrl.create({\n      header: 'Crear Item',\n      inputs: [\n        {\n          type: 'number',\n          name: 'cantidad',\n          placeholder: 'Ingrese la cantidad'\n        },\n        {\n          type: 'text',\n          name: 'item',\n          placeholder: 'Descripción'\n        },\n        {\n          type: 'number',\n          name: 'valoru',\n          placeholder: 'Ingrese el valor unitario'\n        }\n      ],\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          \n        },\n        {\n          text: 'Guardar',\n          handler: (data) => {\n              // console.log(data);\n              data.total = data.cantidad * data.valoru;\n              this.items.push(data);\n              this.carga = false;\n              this.calculo();\n          }\n        }\n      ]\n    })\n\n    await info.present();\n  }\n\n  eliminar( idx ) {\n    this.items.splice(idx, 1);\n    this.calculo();\n  }\n\n  calculo() {\n    this.subtotal = 0;\n    this.total = 0;\n    this.iva = 0;\n    let sb = 0;\n    this.totales = [];\n    this.items.forEach((item) => {\n      sb = sb + parseFloat(item.total);\n    })\n\n\n    this.subtotal = sb;\n    if (this.data.iva) {\n      this.iva = this.subtotal * 0.19;\n    }\n    this.total = this.subtotal + this.iva;\n    this.carga = true;\n    \n    this.totales.push({\n      total: this.total,\n      subtotal: this.subtotal,\n      iva: this.iva\n    })\n    // // console.log('data de la factura',  this.subtotal, this.total, this.iva, this.data.iva, this.items)\n  }\n\n  async guardar() {\n    if (this.items.length > 0 && this.cliente !== '' && this.cc !== '') {\n      const info = await this.almacenamiento.obtenerToken();\n\n      if ( info  ) {\n      // tslint:disable-next-line:max-line-length\n        this.apiFactura.guardarConfiguracion(info.token, {cliente: this.cliente, direccion: this.direccion, telefono: this.telefono, iva: this.iva, cc: this.cc, ciudad: this.ciudad, subtotal: this.subtotal, total: this.total, lista: this.items, descuento: 0, idconfig: this.data.id}).subscribe((data: any) => {\n          if (data.exe) {\n            this.toast.toastExitoso('Factura creada con éxito');\n            this.modalCtrl.dismiss({\n              exe: true\n            });\n          } else {\n            this.toast.toastError('No se pudo guardar la información de la factura, intentelo mpas tarde');\n          }\n        }, (err) => {\n          this.toast.toastError('No se pudo guardar la información de la factura, intentelo mpas tarde');\n        })\n      }\n    } else {\n      this.toast.toastError('La información requerida aún esta icompleta, veirifca el nombre del cliente, su cédula y la descripción de la factura');\n    }\n  }\n\n}\n"]}