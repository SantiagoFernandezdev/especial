{"version":3,"sources":["./src/app/pages/Inventarios/ivtempleados/ivtempleados-routing.module.ts","./src/app/pages/Inventarios/ivtempleados/ivtempleados.module.ts","./src/app/pages/Inventarios/ivtempleados/ivtempleados.page.ts","./src/app/pages/Inventarios/ivtempleados/ivtempleados.page.html"],"names":[],"mappings":"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","file":"Inventarios-ivtempleados-ivtempleados-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IVTempleadosPage } from './ivtempleados.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: IVTempleadosPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class IVTempleadosPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { IVTempleadosPageRoutingModule } from './ivtempleados-routing.module';\n\nimport { IVTempleadosPage } from './ivtempleados.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    IVTempleadosPageRoutingModule\n  ],\n  declarations: [IVTempleadosPage]\n})\nexport class IVTempleadosPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { InventariosService } from '../../../providers/Api/Inventarios.service';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { LoadingController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-ivtempleados',\n  templateUrl: './ivtempleados.page.html',\n  styleUrls: ['./ivtempleados.page.scss'],\n})\nexport class IVTempleadosPage implements OnInit {\n  \n  empleados = [];\n  buscados = [];\n  accesos = [];\n\n  load = false;\n\n  marcar = false;\n  id = '';\n\n  ivt: any = {};\n  cargauno = false;\n\n  constructor(\n    private almacenamiento: InicioService,\n    private IVTapi: InventariosService,\n    private toast: ToastServices,\n    private active: ActivatedRoute,\n    private loading: LoadingController\n  ) { }\n\n  ngOnInit() {\n  }\n\n  async ionViewWillEnter() {\n    this.id = this.active.snapshot.paramMap.get('id');\n    await this.traerEmpleados()\n  }\n\n  refrescando( event) {\n    this.traerEmpleados().then(() => {\n      event.target.complete();\n    }).catch(() => {\n      event.target.complete();\n    });\n  }\n\n\n\n  async traerEmpleados() {\n    this.load = true;\n    const info = await this.almacenamiento.obtenerToken();\n\n    if ( info ) {\n        \n        this.IVTapi.leerEmpleados(info.token).subscribe((data: any) => {\n            console.log(data);\n            if (data.exe) {\n\n                let arr = [];\n\n                data.response.forEach((item) => {\n                  if (item.usuario.imagen.length > 0) {\n                    item.usuario.imagen = `https://motocaliapp.com/${item.usuario.imagen[0].path}`;\n                  } else {\n                    item.usuario.imagen = '/assets/notfound.png';\n                  }\n                })\n                arr = data.response;\n\n                console.log(this.id);\n\n                this.IVTapi.leerInventario(info.token, this.id).subscribe((re: any) => {\n                    console.log(re, 'mio');\n                    if (re.exe) {\n                      this.ivt = re.response;\n                      arr.forEach((item) => {\n                        if (re.response.accesos.find((acceso) => acceso === item.usuario._id )) {\n                            item.checked = true;\n                          }\n\n                          console.log('bien')\n                      })\n                      this.cargauno = true;\n                      console.log(this.cargauno)\n                      this.empleados = arr;\n                    }\n\n                  \n                })\n\n            } else {\n              this.toast.toastError('No se pudo traer la información, intentelo más tarde');\n            }\n\n            this.load = false;\n        }, (err) => {\n          this.toast.toastError('No se pudo traer la información, intentelo más tarde');\n        })\n\n      }\n  }\n\n  async marcando( event ) {\n    console.log(event.detail)\n    if (this.cargauno) {\n      const loading = await this.loading.create({\n        message: 'Procesando información...',\n        translucent: true,\n        mode: 'ios'\n      })\n  \n      await loading.present();\n  \n      const info = await this.almacenamiento.obtenerToken();\n  \n      if ( info ) {\n        // tslint:disable-next-line:max-line-length\n        this.IVTapi.editarAcceso(info.token, {id: event.detail.value, estado: event.detail.checked, _id: this.id}).subscribe(async (re: any) => {\n                \n          if (re.exe) {\n          }\n  \n          await loading.dismiss();\n      }, async (err) => {\n        await loading.dismiss();\n      })\n      }\n    }\n  }\n\n  ionViewDidLeave() {\n    console.log('sale');\n    this.cargauno = false;\n    this.empleados = [];\n  }\n\n}\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar color=\"success\">\n\n        <ion-buttons slot=\"start\">\n            <ion-back-button icon=\"chevron-back-outline\" defaultHref=\"/central/menu/ivt-inicio\"></ion-back-button>\n        </ion-buttons>\n\n        <ion-title>Mis Empleados</ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content>\n\n    <ion-refresher slot=\"fixed\" (ionRefresh)=\"refrescando($event)\" pullFactor=\"0.5\" pullMin=\"50\" pullMax=\"150\">\n        <ion-refresher-content pullingIcon=\"arrow-dropdown\" refreshingSpinner=\"circles\">\n        </ion-refresher-content>\n    </ion-refresher>\n\n    <ion-searchbar mode=\"ios\" placeholder=\"Buscar Empleado\"></ion-searchbar>\n\n\n\n    <div class=\"divider light\"></div>\n\n    <div class=\"divider\"></div>\n\n    <div class=\"cen\" *ngIf=\"empleados.length === 0\">\n        <img src=\"/assets/Empleadoslista.png\" width=\"100px\" alt=\"\">\n        <h3 class=\"tituloGrande\">No tiene empleados registrados</h3>\n    </div>\n\n    <div class=\"carga\" *ngIf=\"load\">\n        <ion-list>\n            <ion-item *ngFor=\"let e of [1,1,1,1,1]\">\n                <ion-skeleton-text slot=\"start\" animated style=\"width: 50px; height: 50px\"></ion-skeleton-text>\n                <ion-label>\n                    <ion-skeleton-text animated style=\"width: 50%; height: 20px\"></ion-skeleton-text>\n                    <ion-skeleton-text animated style=\"width: 90%; height: 20px\"></ion-skeleton-text>\n                </ion-label>\n            </ion-item>\n        </ion-list>\n\n    </div>\n\n\n    <ion-list *ngIf=\"empleados.length > 0\">\n        <ion-item-divider lines=\"none\" color=\"muro\">\n            <div class=\"padreflex\">\n                <div class=\"titulo\">\n                    <h3>Registrados</h3>\n                </div>\n                <div class=\"numero\">\n                    <img src=\"/assets/Empleadoslista.png\" width=\"25px\" height=\"25px\" alt=\"\">\n                    <h3>{{ empleados.length }}</h3>\n                </div>\n            </div>\n        </ion-item-divider>\n        <ion-item-sliding *ngFor=\"let empleado of empleados\">\n            <ion-item>\n                <ion-avatar slot=\"start\">\n                    <img [src]=\"empleado.usuario.imagen\" width=\"100%\" height=\"100%\" alt=\"\">\n                </ion-avatar>\n                <ion-label>\n                    <span>{{ empleado.usuario.nombrecompleto }}</span><br> <strong class=\"verdei\">@{{ empleado.usuario.nombreusuario }}</strong>\n                    <div *ngIf=\"empleado.cargo\" class=\"rojoi\">Cargo: {{ empleado.cargo }}</div>\n                    <div *ngIf=\"empleado.alias\" class=\"rojoi\">Alías: {{ empleado.alias }}</div>\n                </ion-label>\n\n                <ion-checkbox [checked]=\"empleado.checked\" slot=\"end\" color=\"danger\" value=\"{{ empleado.usuario._id }}\" (ionChange)=\"marcando( $event )\"></ion-checkbox>\n\n            </ion-item>\n\n\n        </ion-item-sliding>\n    </ion-list>\n\n\n</ion-content>"],"sourceRoot":"webpack:///"}