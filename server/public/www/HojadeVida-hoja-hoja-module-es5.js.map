{"version":3,"sources":["webpack:///src/app/pages/HojadeVida/hoja/hoja-routing.module.ts","webpack:///src/app/pages/HojadeVida/hoja/hoja.module.ts","webpack:///src/app/pages/HojadeVida/hoja/hoja.page.html","webpack:///src/app/pages/HojadeVida/hoja/hoja.page.ts"],"names":["routes","path","component","HojaPageRoutingModule","forChild","imports","exports","HojaPageModule","declarations","HojaPage","almacenamiento","toast","apiHoja","router","statusbar","alertCtrl","desde","hojas","cargado","patron","textoBuscar","console","log","inifinito","disabled","cargarHojas","backgroundColorByHexString","event","then","target","complete","catch","obtenerToken","info","role","buscarHojas","token","subscribe","data","exe","response","toastError","err","detail","value","buscarHojasFiltro","length","forEach","hoja","push","tipo","navigate","cita","_id","create","header","message","inputs","type","placeholder","name","buttons","text","handler","crear","alert","present","crearHoja","usuario","placa","nusuario","cliente","resp","toastExitoso","refrescando","buscar","abrir","selector","templateUrl","styleUrls","static"],"mappings":"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","file":"HojadeVida-hoja-hoja-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HojaPage } from './hoja.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HojaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HojaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HojaPageRoutingModule } from './hoja-routing.module';\n\nimport { HojaPage } from './hoja.page';\nimport { PipesModule } from '../../../pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HojaPageRoutingModule,\n    PipesModule\n  ],\n  declarations: [HojaPage]\n})\nexport class HojaPageModule {}\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar color=\"oscuro\">\n        <ion-back-button icon=\"chevron-back-outline\" slot=\"start\" defaultHref=\"/central/menu/\"></ion-back-button>\n        <ion-title>Hojas de Vida</ion-title>\n\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n    <ion-refresher slot=\"fixed\" (ionRefresh)=\"refrescando($event)\" pullFactor=\"0.5\" pullMin=\"50\" pullMax=\"150\">\n        <ion-refresher-content pullingIcon=\"arrow-dropdown\" refreshingSpinner=\"circles\">\n        </ion-refresher-content>\n    </ion-refresher>\n\n    <ion-searchbar mode=\"ios\" placeholder=\"{{ textoBuscar }}\" (ionChange)=\"buscar($event)\"></ion-searchbar>\n\n\n    <div class=\"divider light\"></div>\n\n\n    <ion-list *ngIf=\"!cargado\">\n        <ion-item *ngFor=\"let f of [1,1,1,1]\">\n            <ion-avatar slot=\"start\">\n                <ion-skeleton-text animted style=\"width: 100%; height: 100%;\"></ion-skeleton-text>\n            </ion-avatar>\n            <ion-label>\n                <ion-skeleton-text animted style=\"width: 100%; height: 20px;\"></ion-skeleton-text>\n                <ion-skeleton-text animted style=\"width: 50%; height: 20px;\"></ion-skeleton-text>\n            </ion-label>\n        </ion-item>\n    </ion-list>\n\n    <div *ngIf=\"cargado && hojas.length === 0\" class=\"flexbet\">\n        <img src=\"/assets/Hojas.png\" width=\"70px\" alt=\"\">\n        <h3 class=\"tituloGrande\">Mis hojas de vida</h3>\n    </div>\n\n    <ion-list *ngIf=\"hojas.length > 0\">\n        <ion-item class=\"item sinfondo\" *ngFor=\"let hoja of hojas\" (click)=\"navegar(hoja)\">\n            <ion-avatar slot=\"start\">\n                <img src=\"/assets/Estrella.png\" width=\"100%\" height=\"100%\" alt=\"\">\n            </ion-avatar>\n            <ion-label class=\"ion-text-wrap\" *ngIf=\"!hoja.tipo || hoja.tipo === 'cita'\">\n                <div class=\"flex\"><strong>Taller: </strong> <span class=\"cll\"> {{ hoja.idtaller.nombrecompleto }}</span></div>\n                <div class=\"flex\"><strong>Cliente: </strong> {{ hoja.idusuario.nombrecompleto }}</div> <br>\n\n                <div class=\"flex\">Repuestos Agregados:\n                    <ion-chip color=\"danger\">tiene {{ hoja.repuestos.length }}</ion-chip>\n                </div>\n                <div class=\"flex\">Trabajos Realizados:\n                    <ion-chip color=\"success\">tiene {{ hoja.trabajos.length }}</ion-chip>\n                </div>\n                <br>\n                <div class=\"flex fl\"><strong>Fecha: </strong> <span class=\"cl\">{{ hoja.fecha| cambioUTC }}</span>\n                </div>\n\n            </ion-label>\n\n            <ion-label class=\"ion-text-wrap\" *ngIf=\"hoja.tipo && hoja.tipo === 'hoja'\">\n                <div class=\"flex\"><strong>Taller: </strong> <span class=\"cll\"> {{ hoja.idtaller.nombrecompleto }}</span></div>\n                <div class=\"flex\"><strong>Cliente: </strong> {{ hoja.nusuario }}</div> <br>\n\n                <div class=\"flex\">Repuestos Agregados:\n                    <ion-chip color=\"danger\">tiene {{ hoja.repuestos.length }}</ion-chip>\n                </div>\n                <div class=\"flex\">Trabajos Realizados:\n                    <ion-chip color=\"success\">tiene {{ hoja.trabajos.length }}</ion-chip>\n                </div>\n                <br>\n                <div class=\"flex fl\"><strong>Fecha: </strong> <span class=\"cl\">{{ hoja.fecha| cambioUTC }}</span>\n                </div>\n\n            </ion-label>\n        </ion-item>\n    </ion-list>\n\n    <ion-infinite-scroll *ngIf=\"cargado\" #inifinito threshold=\"100px\" (ionInfinite)=\"loadData($event)\">\n        <ion-infinite-scroll-content loadingSpinner=\"bubbles\" loadingText=\"Cargando Hojas de Vida...\">\n        </ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n\n    <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n        <ion-fab-button color=\"barra\" (click)=\"abrir()\">\n            <ion-icon name=\"add-outline\"></ion-icon>\n        </ion-fab-button>\n    </ion-fab>\n\n\n</ion-content>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { EstadoCitasService } from '../../../providers/Api/EstadoCitas.service';\nimport { AlertController, IonInfiniteScroll } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { StatusBar } from '@ionic-native/status-bar/ngx';\n\n@Component({\n  selector: 'app-hoja',\n  templateUrl: './hoja.page.html',\n  styleUrls: ['./hoja.page.scss'],\n})\nexport class HojaPage implements OnInit {\n\n  desde = 0;\n  hojas = [];\n  cargado = true;\n  patron = '';\n textoBuscar = '';\n\n  @ViewChild('inifinito', {static: false}) inifinito: IonInfiniteScroll;\n\n  constructor(\n    private almacenamiento: InicioService,\n    private toast: ToastServices,\n    private apiHoja: EstadoCitasService,\n    private router: Router,\n    private statusbar: StatusBar,\n    private alertCtrl: AlertController\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n\n    this.desde = 0;\n    console.log('volviendo')\n    this.hojas = [];\n    this.inifinito.disabled = false;\n\n    this.cargarHojas();\n    this.statusbar.backgroundColorByHexString('#273238');\n\n  }\n\n\n  refrescando( event ) {\n    this.desde = 0;\n    this.cargarHojas().then(() => {\n      event.target.complete();\n    }).catch(() => {\n      event.target.complete();\n    })\n      \n  }\n\n  async cargarHojas() {\n      const info = await this.almacenamiento.obtenerToken();\n      if ( info ) {\n\n        if (info.role === 'TALLER_ROLE') {\n\n          this.textoBuscar = 'Buscar por cliente';\n\n        } else {\n          this.textoBuscar = 'Buscar por taller';\n        }\n          \n          this.apiHoja.buscarHojas(info.token, {desde: this.desde}).subscribe((data: any) => {\n            console.log(data);\n            if (data.exe) {\n              this.hojas = data.response;\n\n            } else {\n              this.hojas = [];\n              this.toast.toastError('No se pudo traer las hojas de vida, inténtelo más tarde.');\n            }\n            this.cargado = true;\n          }, (err) => {\n            this.cargado = true;\n            this.hojas = [];\n            this.toast.toastError('No se pudo traer las hojas de vida, inténtelo más tarde.');\n          })\n      }\n  }\n\n  async buscar(event) {\n    \n    if ( event.detail.value !== '') {\n      this.desde = 0;\n      this.patron = event.detail.value;\n      const info = await this.almacenamiento.obtenerToken();\n\n      if ( info ) {\n        this.apiHoja.buscarHojasFiltro(info.token, {desde: this.desde, patron: this.patron}).subscribe((data: any) => {\n          console.log(data, 'mi data');\n          if ( data.exe ){\n            this.hojas = data.response;\n          } else {\n            this.toast.toastError('No se pudo realizar la búsqueda, intentelo más tarde');\n          }\n        }, (err) => {\n          this.toast.toastError('No se pudo realizar la búsqueda, intentelo más tarde');\n        })\n      }\n    } else {\n      this.inifinito.disabled = false;\n      this.cargarHojas();\n    }\n  }\n\n  async loadData( event ) {\n    // event.target.complete()\n\n    this.desde = this.desde + 5;\n\n    const info = await this.almacenamiento.obtenerToken();\n\n    if ( info ) {\n      if ( this.patron === '') {\n        this.apiHoja.buscarHojas(info.token, {desde: this.desde}).subscribe((data: any) => {\n          console.log(data);\n          if (data.exe) {\n            if ( data.response.length > 0  ) {\n              data.response.forEach((hoja) => {\n                this.hojas.push(hoja);\n              })\n              event.target.complete();\n             } else {\n              event.target.disabled = true;\n              this.desde = 0;\n             }\n          } else {\n            this.toast.toastError('No se pudo traer las hojas de vida, inténtelo más tarde.');\n          }\n        }, (err) => {\n          this.toast.toastError('No se pudo traer las hojas de vida, inténtelo más tarde.');\n        })\n      } else {\n        this.apiHoja.buscarHojasFiltro(info.token, {desde: this.desde, patron: this.patron}).subscribe((data: any) => {\n          console.log(data, 'mi data');\n          if ( data.exe ){\n            if ( data.response.length > 0  ) {\n              data.response.forEach((hoja) => {\n                this.hojas.push(hoja);\n              })\n              event.target.complete();\n           } else {\n            event.target.disabled = true;\n            this.desde = 0;\n           }\n          } else {\n            this.toast.toastError('No se pudo realizar la búsqueda, intentelo más tarde');\n          }\n        }, (err) => {\n          this.toast.toastError('No se pudo realizar la búsqueda, intentelo más tarde');\n        })\n      }\n      \n      \n    }\n    }\n    \n  navegar( hoja ) {\n      if (!hoja.tipo || hoja.tipo === 'cita') {\n        this.router.navigate(['/central/menu/hoja/mihoja', hoja.cita._id, 'cita'])\n      } else {\n        this.router.navigate(['/central/menu/hoja/mihoja', hoja._id, 'hoja'])\n      }\n  }\n\n  ionViewWillLeave() {\n    this.statusbar.backgroundColorByHexString('#777777');\n  }\n\n  async abrir() {\n    const alert = await this.alertCtrl.create({\n      header: 'Crear Hoja de vida',\n      message: '¿Quieres crear una nueva hoja de vida?',\n      inputs: [\n        {\n          type: 'text',\n          placeholder: 'Nombre del cliente',\n          name: 'cliente'\n        }\n        ,{\n          type: 'text',\n          placeholder: 'Plca del Vehículo',\n          name: 'placa'\n        }\n      ],\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel'\n        },\n        {\n          text: 'Crear Hoja',\n          handler: (data) => {\n              this.crear(data);\n          }\n        }\n      ]\n    })\n\n    await alert.present();\n  }\n\n  async crear(data: any) {\n\n    const info = await this.almacenamiento.obtenerToken();\n\n    if ( info ) {\n       // tslint:disable-next-line:max-line-length\n       this.apiHoja.crearHoja(info.token, {usuario: '', placa: data.placa, nusuario: data.cliente, cita: ''}).subscribe((resp: any) => {\n         console.log(resp)\n         if (resp.exe) {\n            this.toast.toastExitoso('Hoja de vida creada');\n         } else {\n          this.toast.toastError('No se pudo crear la hoja de vida, intentelo más tarde');\n         }\n       }, (err) => {\n        this.toast.toastError('No se pudo crear la hoja de vida, intentelo más tarde');\n       })\n    }\n\n  }\n\n\n}\n"]}