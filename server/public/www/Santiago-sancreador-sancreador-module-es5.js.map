{"version":3,"sources":["webpack:///src/app/pages/Santiago/sancreador/sancreador-routing.module.ts","webpack:///src/app/pages/Santiago/sancreador/sancreador.module.ts","webpack:///src/app/pages/Santiago/sancreador/sancreador.page.html","webpack:///src/app/pages/Santiago/sancreador/sancreador.page.ts"],"names":["routes","path","component","SANcreadorPageRoutingModule","forChild","imports","exports","SANcreadorPageModule","entryComponents","declarations","SANcreadorPage","almacenamiento","modalCtrl","IGTMApi","toast","router","actionCtrl","camera","media","myLoading","socket","statusbar","activeRoute","tipoPublicacion","historia","cargado","colorSelect","color","letra","colores","texto","valort","etiquetados","comentario","archivos","carrete","carreteRoot","video","tipo","snapshot","paramMap","get","console","log","iniciar","event","detail","value","length","obtenerToken","info","create","componentProps","modal","present","onWillDismiss","cerrado","data","exe","find","item","nombreusuario","persona","push","idx","splice","valor","previo","charAt","header","buttons","icon","text","handler","tomarFoto","PictureSourceType","CAMERA","toastNotificacion","PHOTOLIBRARY","etiquetar","action","sourceType","mode","options","quality","allowEdit","correctOrientation","destinationType","DestinationType","FILE_URI","mediaType","MediaType","PICTURE","VIDEO","getPicture","then","imageData","mim","name","includes","mime","cont","url","window","Ionic","WebView","convertFileSrc","cleanup","opctions","limit","duration","captureVideo","fullPath","type","vide","indice","publicacion","token","grafico","etiquetas","enviarMensaje","cargaProcesos","crearPublicacion","subscribe","id","response","_id","sort","a","b","final","forEach","subirArchivosChat","image","JSON","parse","finalizarCargado","emit","nameSecret","ruta","nameConvert","nuevo","creador","nombre","toastExitoso","navigate","error","alertApplication","res","toastError","err","crear","cambio","selector","templateUrl","styleUrls"],"mappings":"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","file":"Santiago-sancreador-sancreador-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SANcreadorPage } from './sancreador.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SANcreadorPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SANcreadorPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SANcreadorPageRoutingModule } from './sancreador-routing.module';\n\nimport { SANcreadorPage } from './sancreador.page';\nimport { IgtmplantillaPageModule } from '../../Modales/igtmplantilla/igtmplantilla.module';\nimport { IgtmplantillaPage } from '../../Modales/igtmplantilla/igtmplantilla.page';\n\n@NgModule({\n  entryComponents: [\n    IgtmplantillaPage\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SANcreadorPageRoutingModule,\n    IgtmplantillaPageModule\n  ],\n  declarations: [SANcreadorPage]\n})\nexport class SANcreadorPageModule {}\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar color=\"oscuro\">\n\n    <ion-back-button slot=\"start\" *ngIf=\"tipo === 'historia'\" icon=\"chevron-back-outline\" defaultHref=\"/central/iniciosan\"></ion-back-button>\n\n        <ion-title>Crear publicación</ion-title>\n\n        <ion-buttons mode=\"ios\" slot=\"end\">\n            <ion-button (click)=\"crear()\">Publicar</ion-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n\n    <ion-list>\n        <ion-item color=\"blanco\">\n            <ion-select value=\"dibujar\" okayText=\"Aceptar\" cancelText=\"Cancelar\" (ionChange)=\"cambio( $event )\">\n                <ion-select-option value=\"dibujar\">Dibujar</ion-select-option>\n                <ion-select-option value=\"multimedia\">Multimedia</ion-select-option>\n            </ion-select>\n        </ion-item>\n    </ion-list>\n\n\n    <div *ngIf=\"tipoPublicacion === 'dibujar'\" class=\"\">\n\n        <ion-segment scrollable=\"true\">\n            <div class=\"color\" *ngFor=\"let color of colores\" [style.background]=\"color.color\" (click)=\"cambiarColor( color )\"><span>ssfsdfsfs</span>\n\n            </div>\n        </ion-segment>\n\n        <div #lienzo class=\"lienzo\" [style.background]=\"colorSelect.color\" [style.color]=\"colorSelect.letra\">\n\n            <ion-textarea [autofocus]=\"true\" inputmode=\"text\" [autoGrow]=\"true\" maxlength=\"120\" class=\"text-lienzo\" placeholder=\"Escribe un texto para la publicación\" [value]=\"valort\" (ionChange)=\"cambiarTexto( $event )\">\n\n            </ion-textarea>\n\n\n        </div>\n\n        <ion-list>\n            <ion-item-divider color=\"light\">\n                <ion-label>Añadir Etiquetas</ion-label>\n                <ion-buttons slot=\"end\">\n                    <ion-button (click)=\"etiquetar()\">\n                        <ion-icon name=\"chevron-forward-outline\" slot=\"icon-only\"></ion-icon>\n                    </ion-button>\n                </ion-buttons>\n            </ion-item-divider>\n\n            <div *ngIf=\"etiquetados.length > 0\" class=\"etiquetados\">\n                <ion-item-sliding *ngFor=\"let usuario of etiquetados; let i = index;\">\n                    <ion-item>\n                        <ion-avatar slot=\"start\">\n                            <img [src]=\"usuario.imagen\" width=\"100%\" height=\"100%\" alt=\"\">\n                        </ion-avatar>\n                        <ion-label>\n                            <strong>{{ usuario.nombrecompleto }}</strong><br> @{{ usuario.nombreusuario }}\n                        </ion-label>\n                    </ion-item>\n                    <ion-item-options side=\"end\">\n                        <ion-item-option color=\"danger\" (click)=\"eliminar(i)\">\n                            <ion-icon slot=\"icon-only\" name=\"trash-outline\"></ion-icon>\n                        </ion-item-option>\n                    </ion-item-options>\n                </ion-item-sliding>\n            </div>\n\n\n        </ion-list>\n\n        <ion-item mode=\"ios\" class=\"sinfondo\">\n            <ion-textarea class=\"comentario\" inputmode=\"text\" [autoGrow]=\"true\" maxlength=\"120\" placeholder=\"Escribe un comentario\" (ionChange)=\"cambiar( $event )\" [value]=\"comentario\">\n\n            </ion-textarea>\n        </ion-item>\n\n\n    </div>\n\n\n\n    <div *ngIf=\"tipoPublicacion === 'multimedia'\" class=\"\">\n\n\n        <div>\n\n            <div class=\"none\" *ngIf=\"carreteRoot.length === 0\">\n                <div class=\"flexc\">\n                    <img src=\"/assets/Camara.png\" width=\"70px\" alt=\"\"> <br>\n                    <h3 class=\"tituloGrande\">No Hay archivos agregados para publicar.</h3>\n                </div>\n            </div>\n\n            <ion-slides *ngIf=\"carreteRoot.length > 0\">\n                <ion-slide *ngFor=\"let archivo of carreteRoot; let i = index;\">\n                    <img *ngIf=\"archivo.mime.includes('image')\" src=\"{{archivo.path}}\" width=\"70px\">\n                    <video *ngIf=\"archivo.mime.includes('video') || archivo.mime.includes('Video') || archivo.mime.includes('mp4') || archivo.mime.includes('MP4')\" src=\"{{archivo.path}}\" width=\"70px\" controls></video>\n                    <div class=\"eliminar\" (click)=\"eliminardelCarrete(i)\">\n                        <ion-chip color=\"danger\">Eliminar</ion-chip>\n                    </div>\n                </ion-slide>\n            </ion-slides>\n\n\n        </div>\n\n        <ion-list>\n            <!-- <ion-item-divider color=\"medium\">\n                <ion-label>Añadir Etiquetas</ion-label>\n                <ion-buttons slot=\"end\">\n                    <ion-button (click)=\"etiquetar()\">\n                        <ion-icon name=\"chevron-forward-outline\" slot=\"icon-only\"></ion-icon>\n                    </ion-button>\n                </ion-buttons>\n            </ion-item-divider> -->\n\n            <div *ngIf=\"etiquetados.length > 0\" class=\"etiquetados\">\n                <ion-item-sliding *ngFor=\"let usuario of etiquetados; let i = index;\">\n                    <ion-item>\n                        <ion-avatar slot=\"start\">\n                            <img [src]=\"usuario.imagen\" width=\"100%\" height=\"100%\" alt=\"\">\n                        </ion-avatar>\n                        <ion-label>\n                            <strong>{{ usuario.nombrecompleto }}</strong><br> @{{ usuario.nombreusuario }}\n                        </ion-label>\n                    </ion-item>\n                    <ion-item-options side=\"end\">\n                        <ion-item-option color=\"danger\" (click)=\"eliminar(i)\">\n                            <ion-icon slot=\"icon-only\" name=\"trash-outline\"></ion-icon>\n                        </ion-item-option>\n                    </ion-item-options>\n                </ion-item-sliding>\n            </div>\n        </ion-list>\n\n        <ion-item mode=\"ios\" class=\"sinfondo\">\n            <ion-textarea class=\"comentario\" inputmode=\"text\" [autoGrow]=\"true\" maxlength=\"120\" placeholder=\"Escribe un comentario\" (ionChange)=\"cambiar( $event )\" [value]=\"comentario\">\n\n            </ion-textarea>\n        </ion-item>\n\n\n    </div>\n\n    \n        <ion-fab *ngIf=\"tipoPublicacion === 'multimedia'\" vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n            <ion-fab-button color=\"danger\" (click)=\"opciones()\">\n                <ion-icon name=\"add\"></ion-icon>\n            </ion-fab-button>\n        </ion-fab>\n\n\n</ion-content>","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { IonSlides, ModalController, ActionSheetController } from '@ionic/angular';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { IGTMService } from '../../../providers/Api/IGTM.service';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CaptureVideoOptions, MediaCapture, MediaFile } from '@ionic-native/media-capture/ngx';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { LoadingService } from '../../../providers/Utilidades/LoadingService.service';\nimport { IgtmplantillaPage } from '../../Modales/igtmplantilla/igtmplantilla.page';\nimport { Socket } from 'ngx-socket-io';\nimport { StatusBar } from '@ionic-native/status-bar/ngx';\n\ndeclare var window: any;\n\n@Component({\n  selector: 'app-sancreador',\n  templateUrl: './sancreador.page.html',\n  styleUrls: ['./sancreador.page.scss'],\n})\nexport class SANcreadorPage implements OnInit {\n\n  tipoPublicacion = 'dibujar';\n\n  historia = false;\n\n  cargado = false;\n  colorSelect = {\n    color: '#fafafa',\n    letra: '#333333'\n  };\n\n  colores =  [\n    {\n      color: '#fafafa',\n      letra: '#333333'\n    },\n    {\n      color: '#000000',\n      letra: '#FFFFFF'\n    },\n    {\n      color: '#8854DA',\n      letra: '#FFFFFF'\n    }, {\n      color: '#FFD000',\n      letra: '#FFFFFF'\n    }, {\n      color: '#BAB417',\n      letra: '#FFFFFF'\n    },{\n      color: '#AAD9F0',\n      letra: '#FFFFFF'\n    },{\n      color: '#F5AD45',\n      letra: '#FFFFFF'\n    },{\n      color: '#DD5347',\n      letra: '#FFFFFF'\n    },{\n      color: '#F8C883',\n      letra: '#333333'\n    }\n    ,{\n      color: '#1ABCFE',\n      letra: '#333333'\n    },{\n      color: '#0ACF83',\n      letra: '#333333'\n    },{\n      color: '#ED576B',\n      letra: '#ffffff'\n    },{\n      color: '#FFA300',\n      letra: '#333333'\n    },{\n      color: '#555555',\n      letra: '#ffffff'\n    },{\n      color: '#CC924E',\n      letra: '#ffffff'\n    },{\n      color: '#D69624',\n      letra: '#ffffff'\n    },{\n      color: '#FF7262',\n      letra: '#ffffff'\n    }\n ];\n\n texto = '';\n\n valort = '';\n\n etiquetados = [];\n comentario = '';\n\n // 2 Fase de publicacion\n\n\n archivos = [];\n\n carrete = [];\n carreteRoot = [];\n video = false;\n\n tipo = '';\n\n//  slideOpt = {\n//    zoom: {\n//      maxRatio: 8,\n//      toggle: true\n//    }\n//  }\n\n  @ViewChild('lienzo') p: ElementRef;\n\n  constructor(\n    private almacenamiento: InicioService,\n    private modalCtrl: ModalController,\n    private IGTMApi: IGTMService,\n    private toast: ToastServices,\n    private router: Router,\n    private actionCtrl: ActionSheetController,\n    private camera: Camera,\n    private media: MediaCapture,\n    private myLoading: LoadingService,\n    private socket: Socket,\n    private statusbar: StatusBar,\n    private activeRoute: ActivatedRoute\n  ) { }\n\n  \n\nngOnInit() {\n}\n\n  ionViewWillEnter(){\n    this.carrete = [];\n    this.carreteRoot = [];\n    this.etiquetados = [];\n    this.comentario = '';\n    this.texto = '';\n    this.valort = '';\n    this.tipo = this.activeRoute.snapshot.paramMap.get('tipo')\n    if (this.activeRoute.snapshot.paramMap.get('tipo') === 'historia') {\n      this.historia = true;\n      console.log('Historia creando')\n    }\n    this.iniciar();\n  }\n\n\n  cambiarColor( color: any ) {\n    this.colorSelect = color;\n  }\n\n  detectar( event ) {\n    console.log(event.detail.value.length)\n  }\n\n  cambio( event ) {\n    this.tipoPublicacion = event.detail.value;\n    this.carrete = [];\n    this.carreteRoot = [];\n  }\n\n  async iniciar() {\n    this.cargado = true;\n    const info = await this.almacenamiento.obtenerToken();\n   \n    if ( info ) {\n      \n    \n    }\n  }\n\n  async etiquetar() {\n    const modal = await this.modalCtrl.create({\n      component: IgtmplantillaPage,\n      componentProps: {\n        tipo: 'etiquetar'\n      }\n    })\n    await modal.present();\n\n    const cerrado = await modal.onWillDismiss();\n\n    if (cerrado) {\n      if (cerrado.data) {\n        if (cerrado.data.exe) {\n          if (!this.etiquetados.find((item) => item.nombreusuario === cerrado.data.persona.nombreusuario)) {\n            this.etiquetados.push(cerrado.data.persona);\n          }\n          \n          console.log(this.etiquetados);\n        }\n      }\n      \n    }\n  }\n\n  eliminar( idx ) {\n    this.etiquetados.splice(idx, 1);\n  } \n\n  cambiar( event ) {\n    this.comentario = event.detail.value;\n  }\n\n  cambiarTexto( event ) {\n    this.texto = event.detail.value;\n  }\n\n  async entrada( event ) {\n    const valor = this.comentario;\n    if ( event.detail.data === '@') {\n        console.log('Arroba');\n        const previo = valor.charAt(valor.length - 1);\n        console.log(previo);\n        if(previo === ' ' || previo === '') {\n          const modal = await this.modalCtrl.create({\n            component: IgtmplantillaPage,\n            componentProps: {\n              tipo: 'mencionar'\n            }\n          })\n          await modal.present();\n      \n          const cerrado = await modal.onWillDismiss();\n      \n          if (cerrado) {\n            if (cerrado.data.exe) {\n              console.log(cerrado.data.persona.nombreusuario)\n              this.comentario = this.comentario + cerrado.data.persona.nombreusuario;\n            }\n          }\n        } else {\n          console.log('No se lee como eituqeta');\n        }\n    }\n  }\n\n  async opciones() {\n      const action = await this.actionCtrl.create({\n        header: 'Escoge una opción',\n        buttons: [\n          {\n            icon: 'camera-outline',\n            text: 'Tomar foto de la cámara',\n            handler: () => {\n              if (this.historia) {\n                if (this.carrete.length === 0) {\n                  this.tomarFoto(this.camera.PictureSourceType.CAMERA);\n                } else {\n                  this.toast.toastNotificacion('Solo puedes añadir una imagen por historia');\n                }\n              } else {\n                this.tomarFoto(this.camera.PictureSourceType.CAMERA);\n              }\n            }\n          },\n          {\n            icon: 'image-outline',\n            text: 'Subir foto de galería',\n            handler: () => {\n\n              if (this.historia) {\n                if (this.carrete.length === 0) {\n                  this.tomarFoto(this.camera.PictureSourceType.PHOTOLIBRARY, 'image');\n                } else {\n                  this.toast.toastNotificacion('Solo puedes añadir una imagen por historia');\n                }\n              } else {\n                this.tomarFoto(this.camera.PictureSourceType.PHOTOLIBRARY, 'image');\n              }\n            }\n          },\n          {\n            icon: 'people-outline',\n            text: 'Etiquetas',\n            handler: () => {\n              this.etiquetar();\n            }\n          }\n          // {\n          //   icon: 'videocam-outline',\n          //   text: 'Grabar vídeo de la cámara',\n          //   handler: () => {\n              \n          //     if (!this.carrete.find(item => item.mime.includes('video') || item.mime.includes('Video') )) {\n          //       this.capturarVideo();\n          //     } else {\n          //       this.toast.toastError('No puede adjuntar más de un vídeo por publicación');\n          //     }\n          //   }\n          // },\n          // {\n          //   icon: 'image-outline',\n          //   text: 'Subir vídeo de galería',\n          //   handler: () => {\n          //     if (!this.carrete.find(item => item.mime.includes('video') || item.mime.includes('Video') )) {\n          //       this.tomarFoto(this.camera.PictureSourceType.PHOTOLIBRARY, 'video');\n          //     } else {\n          //       this.toast.toastError('No puede adjuntar más de un vídeo por publicación');\n          //     }\n          //   }\n          // }\n        ]\n      })\n\n      await action.present();\n  }\n\n\n  public tomarFoto(sourceType, mode?) {\n    \n    const options: CameraOptions = {\n      quality: 100,\n      allowEdit: true,\n      correctOrientation: true,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      mediaType: mode === 'image' ? this.camera.MediaType.PICTURE : this.camera.MediaType.VIDEO,\n      sourceType\n    };\n\n    this.camera.getPicture(options).then( async (imageData) => {\n       let mim = '';\n       let name = '';\n       // console.log('image data', imageData)\n       if (imageData.includes('jpg')){\n         mim = 'image/jpg';\n         name = 'image.jpg';\n       } else if (imageData.includes('png')) {\n        mim = 'image/png';\n        name = 'image.png';\n       } else if (imageData.includes('jpeg')) {\n        mim = 'image/jpeg';\n        name = 'image.jpeg';\n       } else if (imageData.includes('gif')) {\n        mim = 'image/gif';\n        name = 'image.gif';\n       } else {\n         name = 'video.mp4';\n         mim = 'video/mp4';\n       }\n       // console.log('Mi archivo', name, mim)\n       this.carrete.push({path: imageData, name, mime: mim, cont: this.carrete.length + 1});\n       const url = window.Ionic.WebView.convertFileSrc( imageData );\n       this.carreteRoot.push({path: url, mime: mim});\n       // console.log(this.carrete);\n       this.camera.cleanup().then(() =>  console.log('Eliminado'));\n    });\n\n\n  }\n\n  capturarVideo() {\n    const opctions: CaptureVideoOptions = {\n      limit: 1,\n      duration: 30\n    }\n    this.media.captureVideo(opctions).then((url: MediaFile[]) => {\n       this.carrete.push({path: url[0].fullPath, name: url[0].name, mime: url[0].type, cont: this.carrete.length + 1});\n       // console.log(url[0].name)\n       const vide = window.Ionic.WebView.convertFileSrc( url[0].fullPath );\n       this.carreteRoot.push({path: vide, mime: url[0].type});\n       // console.log(this.carrete);\n    });\n  }\n\n  eliminardelCarrete(indice) {\n    this.carrete.splice(indice, 1);\n    this.carreteRoot.splice(indice, 1);\n\n    if (!this.carrete.find(item => item.mime.includes('video') || item.mime.includes('Video') )) {\n        this.video = false;\n    }\n  }\n\n\n  async crear() {\n      const info = await this.almacenamiento.obtenerToken();\n\n      if ( info ) {\n\n        if (this.tipoPublicacion === 'dibujar') {\n            if (this.texto !== '') {\n              this.publicacion(info.token, {tipo: 'dibujar', grafico: this.colorSelect, texto: this.texto, comentario: this.comentario, etiquetas: this.etiquetados, historia: this.historia})\n            }\n        } else if (this.tipoPublicacion === 'multimedia') {\n          this.enviarMensaje();\n      }\n      }\n  }\n\n\n\n\n  async enviarMensaje() {\n    // console.log(this.carrete);\n    if ( this.carrete.length > 0 ) {\n        const info = await this.almacenamiento.obtenerToken();\n        this.myLoading.cargaProcesos('Subiendo mensaje con archivos media, por favor espere');\n        if ( info ) {\n          // console.log(info);\n          this.IGTMApi.crearPublicacion(info.token, {\n            tipo: 'multimedia', comentario: this.comentario, etiquetas: this.etiquetados, historia: this.historia\n          }).subscribe((data: any) => {\n              // console.log(data);\n              if (data.exe) {\n                const id = data.response._id;\n\n                this.carrete = this.carrete.sort((a, b) => {\n                  if (a.mime > b.mime) {\n                    return 1;\n                  }\n                  if (a.mime < b.mime) {\n                    return -1;\n                  }\n                  // a must be equal to b\n                  return 0;\n                });\n               \n                console.log(this.carrete, ' imagenes');\n                let cont = this.carrete.length;\n                let final = this.carrete.length === 1 ? true: false;\n                this.carrete.forEach((item: any) => {\n                  // console.log(item, 'itm');\n                  // tslint:disable-next-line:max-line-length\n                  this.IGTMApi.subirArchivosChat(info.token, id, item.path, final, item.cont, this.historia, item.name, item.mime).subscribe((image: any) => {\n                        image.response = JSON.parse(image.response);\n                        if (image.response.exe) {\n                          cont--;\n\n                          console.log('Entamos', image)\n\n                          if (cont === 1) {\n                            final = true;\n                          }\n\n                          if (cont === 0) {\n                            image.response.response.tipo = 'file';\n                            this.myLoading.finalizarCargado();\n                            if (item.mime.includes('video') || item.mime.includes('Video')) {\n\n                              this.socket.emit('subirvideo', {\n                                  nameSecret: image.response.response.ruta,\n                                  nameConvert: image.response.response.nuevo,\n                                  creador: image.response.response.creador,\n                                  mime: image.response.response.mime,\n                                  nombre: image.response.response.nombre,\n                                  _id: id,\n                                  historia: this.historia\n                              });\n                              this.toast.toastExitoso('La publicación estará disponible en unos momentos.')\n                            } else {\n                              this.toast.toastExitoso('Contenido publicado.')\n                            }\n                            \n                            \n                            this.router.navigate(['/central/iniciosan'])\n                          }\n\n                        }\n                        // console.log(image, ' image cada vuelta');\n                  }, (error) => {\n                    // console.log('Error ', error);\n                    this.myLoading.finalizarCargado();\n                    this.toast.alertApplication('No se pudo subir el archivo de vídeo o imagen', true);\n                  });\n                });\n              }\n          });\n        }\n    } \n  }\n\n  publicacion(token, data) {\n    console.log('DATAAAAAAAAAAAAAA', data)\n    this.IGTMApi.crearPublicacion(token, data).subscribe((res: any) => {\n      if (res.exe) {\n        this.toast.toastExitoso('Contenido publicado.')\n        this.router.navigate(['/central/iniciosan'])\n      } else {\n        this.toast.toastError('No se pudo crear la publicación, intentelo más tarde')\n      }\n    }, (err) => {\n      this.toast.toastError('No se pudo crear la publicación, intentelo más tarde')\n    })\n  }\n}\n"]}