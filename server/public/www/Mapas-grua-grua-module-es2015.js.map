{"version":3,"sources":["./src/app/pages/Mapas/grua/grua-routing.module.ts","./src/app/pages/Mapas/grua/grua.module.ts","./src/app/pages/Mapas/grua/grua.page.ts","./src/app/pages/Mapas/grua/grua.page.html"],"names":[],"mappings":"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","file":"Mapas-grua-grua-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { GruaPage } from './grua.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GruaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class GruaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { GruaPageRoutingModule } from './grua-routing.module';\n\nimport { GruaPage } from './grua.page';\nimport { ModalMapasPage } from '../modal-mapas/modal-mapas.page';\nimport { ModalMapasPageModule } from '../modal-mapas/modal-mapas.module';\n\n@NgModule({\n  entryComponents: [\n    ModalMapasPage\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    GruaPageRoutingModule,\n    ModalMapasPageModule\n  ],\n  declarations: [GruaPage]\n})\nexport class GruaPageModule {}\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { AlertController, ModalController } from '@ionic/angular';\nimport { UsuariosLoginService } from '../../../providers/Api/UsuariosLogin.service';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { StatusBar } from '@ionic-native/status-bar/ngx';\nimport { Router } from '@angular/router';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { LoadingService } from '../../../providers/Utilidades/LoadingService.service';\nimport { ModalMapasPage } from '../modal-mapas/modal-mapas.page';\n\ndeclare var mapboxgl;\n\n@Component({\n  selector: 'app-grua',\n  templateUrl: './grua.page.html',\n  styleUrls: ['./grua.page.scss'],\n})\nexport class GruaPage implements OnInit {\n\n  lat = 0;\n  lng = 0;\n\n  mensaje = '';\n\n  imagen = '';\n\n  @ViewChild('mapa') mapa: ElementRef;\n\n  constructor(\n    private alertCtrl: AlertController,\n    private geoReferencia: Geolocation,\n    private usuaripService: UsuariosLoginService,\n    private almacenamiento: InicioService,\n    private statusbar: StatusBar,\n    private router: Router,\n    private toast: ToastServices,\n    private loading: LoadingService,\n    private modalCtrl: ModalController\n  ) { }\n\n  ngOnInit() {\n\n \n  }\n\n  ionViewWillEnter() {\n    this.statusbar.backgroundColorByHexString('#273238');\n    this.llamarFoto();\n    this.confirmarUbicacion();\n  }\n\n  async confirmarUbicacion() {\n    const alert = await this.alertCtrl.create({\n      header: 'Mensaje de la App',\n      message: 'Permitir compartir la ubciación para realizar esta acción',\n      backdropDismiss: false,\n      buttons: [\n        {\n          role: 'cancel',\n          text: 'Cancelar',\n          handler: () => {\n            this.toast.toastNotificacion('No se puede realizar la acción debido a no compartir la ubicación', 3000)\n            this.router.navigate(['/central/menu/inicioMapa']);\n          }\n        },\n        {\n          text: 'Permitir',\n          handler: () => {\n            this.calcular();\n          }\n        }\n      ]\n    })\n\n    await alert.present();\n  }\n\n  async calcular() {\n    try {\n      console.log('entramos al click')\n      const data = await this.geoReferencia.getCurrentPosition();\n\n      if ( data ) {\n      console.log(data);\n      this.lat = data.coords.latitude;\n      this.lng = data.coords.longitude;\n      this.graficar();\n    }\n    } catch (error) {\n      \n      this.mensaje = error;\n    }\n  }\n\n  \nasync llamarFoto() {\n\n  const info = await this.almacenamiento.obtenerToken();\n\n  if ( info ) {\n    this.usuaripService.viewImagen(info.token).subscribe((url: any) => {\n      // // console.log(url);\n      this.imagen = `https://motocaliapp.com/${url.paquete}`;\n      console.log(this.imagen)\n    }, (error) => {\n      // // console.log(error);\n    })\n  }\n      \n    }\n\n  graficar() {\n    mapboxgl.accessToken = 'pk.eyJ1Ijoic2FudGlhZ29mZXJuYW5kZXpkZXYiLCJhIjoiY2tmYmh6cXdzMDM0bDJ2cHRucTI4cHpkaSJ9.-01EYvsLdJOU1Oy4BtwBwA';\n    const mapa = new mapboxgl.Map({\n    container: this.mapa.nativeElement,\n    style: 'mapbox://styles/mapbox/streets-v11',\n    center: [this.lng, this.lat],\n    zoom: 15\n    });\n\n    mapa.addControl(new mapboxgl.NavigationControl());\n\n    const el = document.createElement('div'); \n    el.className = 'marker'; \n    el.style.backgroundImage = 'url(' + this.imagen + ')';\n    el.style.backgroundSize = '100%';\n    el.style.width = 50 + 'px';\n    el.style.height = 50   + 'px';\n\n    const marker = new mapboxgl.Marker({\n      element: el,\n      draggable: true\n    })\n      .setLngLat([this.lng, this.lat])\n      .addTo(mapa)\n\n      const el2 = document.createElement('div'); \n    el2.className = 'marker'; \n    el2.style.backgroundImage = 'url(' + this.imagen + ')';\n    el2.style.backgroundSize = '100%';\n    el2.style.width = 50 + 'px';\n    el2.style.height = 50   + 'px';\n\n    marker.on('dragend', () => {\n          const lngLat = marker.getLngLat();\n          console.log('Longitude: ' + lngLat.lng + '<br />Latitude: ' + lngLat.lat)\n        });\n\n\n    const marker2 = new mapboxgl.Marker({\n          element: el2,\n          draggable: true\n        })\n          .setLngLat([-76.49279796685475, 3.4727944759127922])\n          .addTo(mapa)\n    \n        marker2.on('dragend', () => {\n              const lngLat = marker2.getLngLat();\n              console.log('Longitude: ' + lngLat.lng + '<br />Latitude: ' + lngLat.lat)\n            });\n    \n  }\n\n  async modal() {\n\n    const modal = await this.modalCtrl.create({\n      component: ModalMapasPage,\n      componentProps: {\n        \n      }\n    });\n\n    await modal.present();\n\n  }\n\n  ionViewWillLeave(){\n    this.statusbar.backgroundColorByHexString('#777777');\n  }\n\n}\n","<ion-header>\n    <ion-toolbar color=\"oscuro\">\n        <ion-back-button slot=\"start\" icon=\"chevron-back-outline\" defaultHref=\"/central/menu/inicioMapa\"></ion-back-button>\n        <ion-title>Sistema de Grúa</ion-title>\n        <ion-buttons slot=\"end\">\n            <ion-button (click)=\"modal()\">\n                <ion-icon name=\"add-outline\" slot=\"icon-only\"></ion-icon>\n            </ion-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n\n    <div class=\"mapa\" #mapa>\n\n    </div>\n\n\n</ion-content>"],"sourceRoot":"webpack:///"}