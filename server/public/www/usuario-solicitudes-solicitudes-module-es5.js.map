{"version":3,"sources":["webpack:///src/app/pages/usuario/solicitudes/solicitudes-routing.module.ts","webpack:///src/app/pages/usuario/solicitudes/solicitudes.module.ts","webpack:///src/app/pages/usuario/solicitudes/solicitudes.page.ts","webpack:///src/app/pages/usuario/solicitudes/solicitudes.page.html"],"names":["routes","path","component","SolicitudesPageRoutingModule","forChild","imports","exports","SolicitudesPageModule","declarations","SolicitudesPage","apiSeguimiento","almacenamiento","toastUtilidad","cargarElementos","seguimientos","red","$cargarRed","subscribe","arrancar","obtenerToken","then","info","cancelSuscribe","solicitudesRecibidas","token","solicitudes","console","log","response","data","SeguimientoData","length","forEach","item","usuarioEmisor","imagen","push","err","alertApplication","solicitud","idx","aceptarSolicitud","_id","seguimiento","splice","cancelarSolicitud","unsubscribe","opacity","transform","optional","selector","templateUrl","animations","styleUrls"],"mappings":"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","file":"usuario-solicitudes-solicitudes-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SolicitudesPage } from './solicitudes.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SolicitudesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SolicitudesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SolicitudesPageRoutingModule } from './solicitudes-routing.module';\n\nimport { SolicitudesPage } from './solicitudes.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SolicitudesPageRoutingModule\n  ],\n  declarations: [SolicitudesPage]\n})\nexport class SolicitudesPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ApiSeguimientoService } from 'src/app/providers/Api/Seguimiento.service';\nimport { InicioService } from '../../../providers/Almacenamiento/inicio.service';\nimport { trigger, transition, query, style, stagger, animate } from '@angular/animations';\nimport { ToastServices } from '../../../providers/Utilidades/ToastService.service';\nimport { CargaElementosUsuariosService } from '../../../providers/cargas/usuarios.service';\n\n@Component({\n  selector: 'app-solicitudes',\n  templateUrl: './solicitudes.page.html',\n  animations: [\n    trigger('solicitudes', [\n      transition('* => *', [\n        query(':enter', [\n          style({\n            opacity: 0,\n            transform: 'translateY(400px)'\n          }),\n          stagger(300, [\n            animate('500ms', style({\n              opacity: 1,\n              transform: 'none'\n            }))\n          ])\n        ], {optional: true}),\n\n        query(':leave', [\n          style({\n            opacity: 1,\n            transform: 'none'\n          }),\n          stagger(300, [\n            animate('500ms', style({\n              opacity: 0,\n              transform: 'translateY(-100%)'\n            }))\n          ])\n        ], {optional: true})\n      ])\n    ])\n  ],\n  styleUrls: ['./solicitudes.page.scss'],\n})\nexport class SolicitudesPage implements OnInit {\n\n  seguimientos: any = [];\n  red = 'wifi';\n\n  cancelSuscribe: any;\n\n  constructor(\n    private apiSeguimiento: ApiSeguimientoService,\n    private almacenamiento: InicioService,\n    private toastUtilidad: ToastServices,\n    private cargarElementos: CargaElementosUsuariosService\n  ) { \n    this.cargarElementos.$cargarRed.subscribe((red: any) => {\n      this.red = red;\n      if (this.red !== 'none') {\n        this.arrancar();\n      }\n    })\n\n  }\n\n  ngOnInit() {\n  }\n\n  ionViewDidEnter() {\n    if (this.red !== 'none') {\n      this.arrancar();\n    }\n  }\n\n  arrancar() {\n    \n    this.almacenamiento.obtenerToken().then((info: any) => {\n        this.cancelSuscribe = this.apiSeguimiento.solicitudesRecibidas(info.token).subscribe((solicitudes: any) => {\n             this.seguimientos = [];\n             console.log(solicitudes.response, 11);\n  \n             const data = solicitudes.response.SeguimientoData;\n  \n             if (data.length > 0) {\n              data.forEach((item) => {\n                if ( item.usuarioEmisor.imagen.length > 0) {\n                  item.imagen = item.usuarioEmisor.imagen[0].path;\n                } else {\n                  item.imagen = '';\n                }\n                \n                this.seguimientos.push(item);\n              })\n             }\n  \n             console.log(this.seguimientos, ' Seguimientos');\n        }, (err) => {\n          this.toastUtilidad.alertApplication('No se pudo aceptar la solicitud', false);\n        })\n    });\n  }\n\n  aceptar(solicitud: any, idx: number) {\n    console.log('Datos del aceptar ', solicitud, idx)\n    this.almacenamiento.obtenerToken().then((info: any) => {\n      this.apiSeguimiento.aceptarSolicitud(info.token, solicitud.usuarioEmisor._id).subscribe((seguimiento: any) => {\n          console.log(seguimiento, ' Solicitud aceptada');\n          this.toastUtilidad.alertApplication('Solicitud aceptada', true);\n          this.seguimientos.splice(idx, 1);\n      }, (err) => {\n        this.toastUtilidad.alertApplication('No se pudo aceptar la solicitud', false);\n      })\n    })\n  }\n\n  eliminar(seguimiento: any, idx: number) {\n    this.almacenamiento.obtenerToken().then((info: any) => {\n      this.apiSeguimiento.cancelarSolicitud(info.token, seguimiento.usuarioEmisor._id, '0').subscribe(() => {\n        this.seguimientos.splice(idx, 1);\n      }, (err) => {\n        this.toastUtilidad.alertApplication('No se pudo aceptar la solicitud', false);\n      })\n    })\n  }\n\n  ionViewDidLeave() {\n    // tslint:disable-next-line:no-unused-expression\n    this.cancelSuscribe.unsubscribe;\n  }\n\n}\n","<ion-header class=\"ion-no-border\">\n    <ion-toolbar color=\"oscuro\">\n        <ion-back-button slot=\"start\" defaultHref=\"/central/menu/\" icon=\"chevron-back-outline\">\n        </ion-back-button>\n        <ion-title class=\"medium\">solicitudes de Seguimiento {{seguimientos.length}}</ion-title>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n\n\n    <div class=\"divider\"></div>\n\n\n    <div class=\"blanco\" [ngClass]=\"{'hauto centrar': seguimientos.length === 0}\">\n\n        <ion-list class=\"blanco \" [@solicitudes]=\"seguimientos.length\" *ngIf=\"seguimientos.length > 0\">\n            <ion-item lines=\"none\" color=\"blanco\" *ngFor=\"let solicitud of seguimientos; let i = index;\">\n                <ion-avatar class=\"avatar\" slot=\"start\">\n                    <ion-img src=\"https://motocaliapp.com/{{solicitud.imagen}}\"></ion-img>\n                </ion-avatar>\n                <ion-label class=\"ion-text-wrap\">\n                    <strong class=\"small\">{{solicitud.usuarioEmisor.nombrecompleto}}</strong><br>\n                    <div>@{{solicitud.usuarioEmisor.nombreusuario}}</div>\n                    <div class=\"moto-padre\">\n                        <ion-button (click)=\"aceptar(solicitud, i)\" color=\"success\" shape=\"round\" mode=\"ios\">Aceptar</ion-button>\n\n                        <ion-button (click)=\"eliminar(solicitud, i)\" color=\"light\" shape=\"round\" mode=\"ios\">Eliminar</ion-button>\n                    </div>\n                </ion-label>\n\n            </ion-item>\n        </ion-list>\n    </div>\n</ion-content>"]}